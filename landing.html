<html>
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous"
  />
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
  <link type="text/css" rel="stylesheet" href="/css/landing.css" />
  <meta charset="utf-8" />
  <title>Welcome to iTBI</title>
  <body>
    <div class="container-fluid">
      <div id="header" class="row d-flex">
        <img
          style="position: absolute; height: 15%; width: 15%"
          src="/img/iTBI.png"
        />
        <div style="margin-top: 50px" class="col">
          <h1 id="head-name" class="text-center">iTBI Medical Portal</h1>
          <hr />
        </div>
      </div>
      <div class="row d-flex">
        <div style="margin-left:150px" class="col-sm-auto">
          <h6 style="margin-left:-150px" class="text-left">
            Logged in As: Dr. Dolittle
            <p class="text-left">
              <button style="margin-top: 2px;" type="button" onclick="logout()">
                Logout
              </button>
            </p>
          </h6>
          <h2>Your Patients</h2>
          <table
            style="margin-bottom:25px"
            id="table"
            class="text-center table-responsive table-hover table-bordered"
          >
            <thead class="thead-light">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">ID</th>
                <th scope="col">Patient Info</th>
              </tr>
            </thead>
          </table>
        </div>
        <div class="col-md-auto">
          <h1>Document Upload</h1>
          <input type="file" id="upload" onclick="upload()" />
        </div>
      </div>
    </div>

    <script>
      function hashCode(string) {
        var hash = 0;
        if (string.length == 0) {
          return hash;
        }

        for (var i = 0; i < string.length; i++) {
          var char = string.charCodeAt(i);
          hash = (hash << 5) - hash + char;
          hash = hash & hash;
        }
        return hash;
      }

      function setList() {
        var names = JSON.parse(Cookies.get("patient-names"));
        console.log(names);

        for (var i = 0; i < names.length; i++) {
          var table = document.getElementById("table");
          var row = table.insertRow(i + 1);
          row.setAttribute("class", "table-row");
          var numberCell = row.insertCell(0);
          var nameCell = row.insertCell(1);
          var idCell = row.insertCell(2);
          var infoCell = row.insertCell(3);

          numberCell.innerHTML = i;
          nameCell.innerHTML = names[i];
          idCell.innerHTML = hashCode(names[i]);
          infoCell.innerHTML =
            '<a href="/patient.html?name=' + names[i] + '">></a>';
        }
      }

      function logout() {
        window.location = "/";
      }
      function upload() {}

      window.onload = setList;
    </script>
  </body>
</html>
